import{h as t,r as s}from"./p-3e3eea7e.js";class e{constructor(t,s){this.validator=t,this.inputs=s}validateForm(){return this.state=this.validator.validateMany(Object.keys(this.inputs).map(t=>this.inputs[t])),this.state}isFormValid(){return void 0!==this.state&&this.state.isValid()}getState(){return this.state}getInput(t){return this.inputs[t]}setInputValue(t,s){this.inputs[t].value=s}inputHasErrors(t){return null!==this.getInput(t).value&&this.state.getErrorsFor(t).length>0}getClassesForInput(t){const s=["form-control"];if(null!==this.getInput(t).value){const e=this.state.getErrorsFor(t);s.push(e.length>0?"is-invalid":"is-valid")}return s.join(" ")}}class a{constructor(t,s,e,a){this.identifier=t,this.name=s,this.value=e,this.constraints=a}}class i{constructor(t){this.service=t}renderErrorsForInput(s){const e=this.service.getInput(s);return e&&null!==e.value?t("ul",null,this.service.getState().getErrorsFor(s).map(s=>t("li",null,s.message))):null}}class l{static getNameConstraints(){return[t=>""===t?"Name cannot be empty":null]}static getPasswordConstraints(){return[t=>""===t?"Password cannot be empty":null,t=>!1===/[A-Z]+/.test(t)?"Password must contain at least one uppercase letter":null,t=>!1===/[0-9]+/.test(t)?"Password must contain at least one number":null]}static getEmailConstraints(){return[t=>""===t?"Email cannot be empty":null,t=>!1===/@+/.test(t)?"Email must contain an @ symbol":null]}}class n{constructor(t){this.errors=t}getErrors(){return this.errors}getErrorsFor(t){return this.errors.filter(s=>s.identifier===t)}isValid(){return 0===this.errors.length}}class r{validate(t,s){let e=[];return s.map(s=>{const a=s(t);null!==a&&e.push({message:a,identifier:null})}),new n(e)}validateMany(t){let s=[];return t.forEach((function(t){t.constraints.map(e=>{const a=e(t.value);null!==a&&s.push({message:a,identifier:t.identifier})})})),new n(s)}}const o=class{constructor(t){s(this,t)}componentWillLoad(){let t={name:new a("name","Full name",null,l.getNameConstraints()),email:new a("email","Email",null,l.getEmailConstraints()),password:new a("password","Password",null,l.getPasswordConstraints())};this.service=new e(new r,t),this.templating=new i(this.service)}handleInputChange(t,s){this.service.setInputValue(s,t.target.value),this.validateComponent()}handleSubmit(t){t.preventDefault(),console.log(t)}validateComponent(){this.validationState=this.service.validateForm()}render(){return t("form",{onSubmit:t=>this.handleSubmit(t)},t("div",{class:"form-group"},t("label",{htmlFor:"inputEmail",class:this.service.inputHasErrors("email")?"text-danger":""},"Email"),t("input",{type:"email",class:this.service.getClassesForInput("email"),id:"inputEmail",placeholder:"Email address",value:this.service.getInput("email").value,onInput:t=>this.handleInputChange(t,"email")}),this.templating.renderErrorsForInput("email")),t("div",{class:"form-group"},t("label",{htmlFor:"inputPassword",class:this.service.inputHasErrors("password")?"text-danger":""},"Password"),t("input",{type:"password",class:this.service.getClassesForInput("password"),id:"inputPassword",placeholder:"Password",value:this.service.getInput("password").value,onInput:t=>this.handleInputChange(t,"password")}),this.templating.renderErrorsForInput("password")),t("div",{class:"form-group form-check"},t("input",{type:"checkbox",class:"form-check-input",id:"rememberMe"}),t("label",{class:"form-check-label",htmlFor:"rememberMe"},"Remember me")),t("button",{type:"submit",class:"btn btn-primary",disabled:!this.service.isFormValid()},"Login"))}},u=class{constructor(t){s(this,t)}componentWillLoad(){let t={name:new a("name","Full name",null,l.getNameConstraints()),email:new a("email","Email",null,l.getEmailConstraints()),password:new a("password","Password",null,l.getPasswordConstraints())};this.service=new e(new r,t),this.templating=new i(this.service)}handleInputChange(t,s){this.service.setInputValue(s,t.target.value),this.validateComponent()}handleSubmit(t){t.preventDefault(),console.log(t)}validateComponent(){this.validationState=this.service.validateForm()}render(){return t("form",{onSubmit:t=>this.handleSubmit(t)},t("div",{class:"form-group"},t("label",{htmlFor:"inputName",class:this.service.inputHasErrors("name")?"text-danger":""},"Full Name"),t("input",{type:"text",class:this.service.getClassesForInput("name"),id:"inputName",placeholder:"Full name",value:this.service.getInput("name").value,onInput:t=>this.handleInputChange(t,"name")}),this.templating.renderErrorsForInput("name")),t("div",{class:"form-group"},t("label",{htmlFor:"inputEmail",class:this.service.inputHasErrors("email")?"text-danger":""},"Email"),t("input",{type:"email",class:this.service.getClassesForInput("email"),id:"inputEmail",placeholder:"Email address",value:this.service.getInput("email").value,onInput:t=>this.handleInputChange(t,"email")}),this.templating.renderErrorsForInput("email")),t("div",{class:"form-group"},t("label",{htmlFor:"inputPassword",class:this.service.inputHasErrors("password")?"text-danger":""},"Password"),t("input",{type:"password",class:this.service.getClassesForInput("password"),id:"inputPassword",placeholder:"Password",value:this.service.getInput("password").value,onInput:t=>this.handleInputChange(t,"password")}),this.templating.renderErrorsForInput("password")),t("button",{type:"submit",class:"btn btn-primary",disabled:!this.service.isFormValid()},"Register"))}},h=class{constructor(t){s(this,t),this.defaultTab="login"}render(){return t("div",null,t("ul",{class:"nav nav-tabs",id:"userAuthenticator",role:"tablist"},t("li",{class:"nav-item"},t("a",{class:"nav-link "+("login"===this.defaultTab?"active":""),id:"login-tab","data-toggle":"tab",href:"#login",role:"tab","aria-controls":"login","aria-selected":"true"},"Login")),t("li",{class:"nav-item"},t("a",{class:"nav-link "+("registration"===this.defaultTab?"active":""),id:"register-tab","data-toggle":"tab",href:"#register",role:"tab","aria-controls":"register","aria-selected":"false"},"Register"))),t("div",{class:"tab-content p-4",id:"userAuthenticatorContent"},t("div",{class:"tab-pane "+("login"===this.defaultTab?"show active":""),id:"login",role:"tabpanel","aria-labelledby":"login-tab"},t("login-form",null)),t("div",{class:"tab-pane "+("registration"===this.defaultTab?"show active":""),id:"register",role:"tabpanel","aria-labelledby":"register-tab"},t("registration-form",null))))}};export{o as login_form,u as registration_form,h as user_authenticator};